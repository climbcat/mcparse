/************************************************
* Mistakes in COMPONENT call definitions: Missing default value after '='
*************************************************/

DEFINE INSTRUMENT PSI_DMC(lambda=2.5666, R=0.87, R_curve=0.87, string filename="Na2Ca3Al2F14.laz")

TRACE

COMPONENT source_arm = Progress_bar()
AT (0, 0, 0) ABSOLUTE

COMPONENT source = Source_Maxwell_3(
        yheight = /*0.156*/, xwidth = 0.126,
        Lmin = lambda-ldiff/2, Lmax = lambda+ldiff/2,
        dist=1.5, focus_xw = 0.02,
        focus_yh = 0.12,
        T1 = 296.16, I1 = 8.5E11,
        T2 = 40.68, I2 = 5.2E11)    
AT (0,0,0) RELATIVE source_arm  ROTATED (0,0,0) RELATIVE source_arm

COMPONENT PSDbefore_guides = PSD_monitor(nx = 128, ny = 128, filename = "PSDbefore_guides", xwidth = 0.02, yheight = 0.12)
AT (0, 0, 1.49999) RELATIVE source_arm

COMPONENT ydist_fluxpos = PSDlin_monitor( nbins=11, filename = "ydist_fluxpos.dat", xwidth = 0.120, yheight = 0.02)
AT (0, 0, 5.66+1e-8+0.01) RELATIVE guide4 ROTATED (0,0,90) RELATIVE PREVIOUS

COMPONENT PSD_fluxpos = PSD_monitor(nx = 100, ny = 100, filename = "xdist_fluxposy.dat", xwidth = 0.02, yheight = 0.12)
AT (0, 0, 5.66+1e-7+0.01) RELATIVE ydist_fluxpos


END
